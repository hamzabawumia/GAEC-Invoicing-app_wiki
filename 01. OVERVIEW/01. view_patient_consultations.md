# ğŸ“˜ Use Case: View Patient Consultations

## ğŸ¯ Goal

Allow staff or external systems to retrieve a patientâ€™s consultation attendance records for a given date.

---

## ğŸ”— Entry Point (URL)

```
GET /invoicing_app/consultations/?patient_id=<id>&date=<YYYY-MM-DD>
```

**URL configuration:**
- `invoicing_app/urls.py`

```python
url(r'^consultations/$', ConsultationListView.as_view(), name='consultations')
```

---

## ğŸ‘¤ User Actions

1. User opens **Consultations List**
2. User provides:
   - `patient_id`
   - optional `date`
3. User submits request

---

## âš™ï¸ System Reaction

### Step 1: Frontend / API Client

- Issues HTTP GET request to consultations endpoint
- Sends query parameters only

**Code location(s):**
- Frontend / API client
- `invoicing_app/urls.py`

---

### Step 2: Transport Layer

- Django URL resolver matches request

**Code location(s):**
- `invoicing_app/urls.py`

---

### Step 3: Backend Logic

- `ConsultationListView.get_queryset()` executes
- Applies filters:
  - `patient_ID`
  - `created_date__date`
- Defaults date to today if not supplied

**Code location(s):**
- `invoicing_app/views.py`
- `invoicing_app/serializer.py`

---

### Step 4: Persistence

- Reads from `GeneralConsulting`
- No writes occur

**Code location(s):**
- `invoicing_app/models.py`

---

## ğŸ”’ Invariants

- Date filtering enforced server-side
- Patient isolation guaranteed
- Read-only operation

---

## âŒ What This Use Case Does NOT Do

- Does NOT expose billing data
- Does NOT mutate any state

---

## âœ… Final Outcome

- Filtered consultation list returned

